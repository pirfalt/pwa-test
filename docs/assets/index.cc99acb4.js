import{j as k,O as b,L as g,l as T,r as a,u as w,R as S,a as D,B as F,b as R,c as f}from"./vendor.56e6658f.js";const j=function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))m(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&m(i)}).observe(document,{childList:!0,subtree:!0});function p(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerpolicy&&(o.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?o.credentials="include":t.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function m(t){if(t.ep)return;t.ep=!0;const o=p(t);fetch(t.href,o)}};j();var _="/pwa-test/assets/checkbox.bce85b74.svg";const A="_App_13tdp_1",L="_Header_13tdp_14",$="_Footer_13tdp_28";var d={App:A,Header:L,Footer:$,"Footer-item":"_Footer-item_13tdp_37"};const e=k.exports.jsx,s=k.exports.jsxs,I=k.exports.Fragment;function E(){return s("div",{className:d.App,children:[e(O,{}),e("main",{children:e(b,{})}),e(C,{})]})}function O(){return e(g,{to:"/",children:s("header",{className:d.Header,children:[e("h1",{children:"PWA test"}),e("img",{src:_,className:d["App-logo"],alt:"logo"})]})})}function C(){return s("footer",{className:d.Footer,children:[s(g,{to:"/",className:d["Footer-item"],children:[e("img",{src:_,alt:"logo"}),e("span",{children:"todo"})]}),s(g,{to:"/sync",className:d["Footer-item"],children:[e("img",{src:_,alt:"logo"}),e("span",{children:"sync"})]}),s(g,{to:"/about",className:d["Footer-item"],children:[e("img",{src:_,alt:"logo"}),e("span",{children:"about"})]})]})}var u={"Todo-list":"_Todo-list_1gvp6_1","Todo-item":"_Todo-item_1gvp6_10","Todo-row":"_Todo-row_1gvp6_16","Todo-input":"_Todo-input_1gvp6_26"};const H={name:"PWA test",storeName:"pwa_test",version:1,description:"Offline storage for the app data"},x=T.createInstance(H),y="tasks";async function P(){if(await x.getItem(y)!=null)return;const c=[{text:"Build tools",checked:!0},{text:"Create page layout",checked:!0},{text:"Input fields",checked:!0},{text:"Offline data storage",checked:!0},{text:"Upload images",checked:!1}];await x.setItem(y,c)}function W(){const[n,c]=a.exports.useState([]);a.exports.useEffect(()=>{x.getItem(y).then(t=>c(t!=null?t:[])).catch(t=>console.error("failed to load!",t))},[]),a.exports.useEffect(()=>{x.setItem(y,n).catch(t=>console.error("failed to save!",t))},[n]);const p=t=>{const o=[...n];o[t].checked=!o[t].checked,c(o)},m=t=>{const o=[...n,t];c(o)};return e("form",{onSubmit:t=>{t.preventDefault();const o=`.${u["Todo-input"]}`,i=t.currentTarget.querySelector(o);if(i!=null){const v=i,r=v.value;v.value="",m({text:r,checked:!1})}},children:s("ol",{className:u["Todo-list"],children:[n.map((t,o)=>e("li",{className:u["Todo-item"],children:s("label",{className:u["Todo-row"],children:[e("input",{type:"checkbox",name:`${o}_${t.text}`,checked:t.checked,onChange:()=>p(o)}),t.text]})},o)),e("li",{className:u["Todo-item"],children:e("input",{className:u["Todo-input"],name:"new-item",type:"text",placeholder:"New todo item..."})})]})})}function q(){const n=w();return e("form",{onSubmit:c=>{c.preventDefault()},children:e("input",{className:u["TodoItem-text"],name:"text",type:"text",placeholder:`Todo item ${n.todoId}...`})})}const B="_Sync_pkdpd_1";var M={Sync:B};function K(){return e("div",{className:M.Sync,children:"Sync"})}const U="_root_ajhqc_1",Q="_video_ajhqc_11",V="_canvas_ajhqc_16";var N={root:U,video:Q,canvas:V};function z(){return s("div",{className:N.root,children:[e("p",{children:"About"}),e(G,{})]})}function G(){const n="mediaDevices"in navigator,c=a.exports.useRef(null),p=a.exports.useRef(null),[m,t]=a.exports.useState([]),[o,i]=a.exports.useState();a.exports.useEffect(()=>{if(!n)return;const r=()=>{navigator.mediaDevices.enumerateDevices().then(l=>l.filter(h=>h.kind=="videoinput")).then(t).catch(console.error)};return r(),navigator.mediaDevices.addEventListener("devicechange",r),()=>{navigator.mediaDevices.removeEventListener("devicechange",r)}},[]),a.exports.useEffect(()=>{if(!n)return;const r=c.current;navigator.mediaDevices.getUserMedia({video:{deviceId:o}}).then(l=>{r.srcObject=l}).catch(console.error)},[o]);const v=()=>{const r=p.current,l=c.current;r.width=l.videoWidth,r.height=l.videoHeight,console.debug({canvas:r,video:l});const h=r.getContext("2d");h==null||h.drawImage(l,0,0,r.width,r.height)};return n?s(I,{children:[e("select",{onChange:r=>i(r.target.value),children:m.map(r=>e("option",{value:r.deviceId,children:r.label},r.deviceId))}),e("video",{ref:c,className:N.video,autoPlay:!0}),e("canvas",{ref:p,className:N.canvas}),e("button",{onClick:v,children:"Capture"})]}):s(I,{children:[e("p",{children:"Direct camera usage not supported, using input fallback."}),e("input",{type:"file",accept:"image/*"})]})}P().then(()=>{S.render(e(D.StrictMode,{children:e(F,{basename:"/pwa-test/",children:e(R,{children:s(f,{path:"/",element:e(E,{}),children:[e(f,{index:!0,element:e(W,{})}),e(f,{path:"/:todoId",element:e(q,{})}),e(f,{path:"/sync",element:e(K,{})}),e(f,{path:"/about",element:e(z,{})})]})})})}),document.getElementById("root"))});"serviceWorker"in navigator?navigator.serviceWorker.register("./service-worker.js",{}).then(n=>{console.log("Registration succeeded. Scope is "+n.scope)}).catch(n=>{debugger;console.log("Registration failed with "+n)}):console.error("Wont work!");
